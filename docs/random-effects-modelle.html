<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Abschnitt 4 Random effects Modelle | Mini-Workshop Panel Data Analysis</title>
  <meta name="description" content="Material für den Mini-Workshop Panel Data Analysis" />
  <meta name="generator" content="bookdown 0.17 and GitBook 2.6.7" />

  <meta property="og:title" content="Abschnitt 4 Random effects Modelle | Mini-Workshop Panel Data Analysis" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Material für den Mini-Workshop Panel Data Analysis" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Abschnitt 4 Random effects Modelle | Mini-Workshop Panel Data Analysis" />
  
  <meta name="twitter:description" content="Material für den Mini-Workshop Panel Data Analysis" />
  

<meta name="author" content="Marko Bachl (mit Material von Michael Scharkow)" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="fixed-effects-modelle.html"/>
<link rel="next" href="within-between-models.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />











<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Panel Data Analysis</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Überblick</a><ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#inhalt-des-virtuellen-mini-workshops"><i class="fa fa-check"></i><b>1.1</b> Inhalt des virtuellen Mini-Workshops</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#welche-inhalte-wir-nicht-behandeln"><i class="fa fa-check"></i><b>1.2</b> Welche Inhalte wir nicht behandeln</a></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#aufbau-des-workshops"><i class="fa fa-check"></i><b>1.3</b> Aufbau des Workshops</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="einführung.html"><a href="einführung.html"><i class="fa fa-check"></i><b>2</b> Einführung</a><ul>
<li class="chapter" data-level="2.1" data-path="einführung.html"><a href="einführung.html#längsschnittdaten"><i class="fa fa-check"></i><b>2.1</b> Längsschnittdaten</a></li>
<li class="chapter" data-level="2.2" data-path="einführung.html"><a href="einführung.html#beispiel-daten"><i class="fa fa-check"></i><b>2.2</b> Beispiel-Daten</a></li>
<li class="chapter" data-level="2.3" data-path="einführung.html"><a href="einführung.html#pooled-ols-wrong"><i class="fa fa-check"></i><b>2.3</b> Pooled OLS (WRONG!)</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="fixed-effects-modelle.html"><a href="fixed-effects-modelle.html"><i class="fa fa-check"></i><b>3</b> Fixed effects Modelle</a><ul>
<li class="chapter" data-level="3.1" data-path="fixed-effects-modelle.html"><a href="fixed-effects-modelle.html#konzeptionelle-einführung"><i class="fa fa-check"></i><b>3.1</b> Konzeptionelle Einführung</a></li>
<li class="chapter" data-level="3.2" data-path="fixed-effects-modelle.html"><a href="fixed-effects-modelle.html#übungsaufgaben-1"><i class="fa fa-check"></i><b>3.2</b> Übungsaufgaben 1</a></li>
<li class="chapter" data-level="3.3" data-path="fixed-effects-modelle.html"><a href="fixed-effects-modelle.html#fixed-effects-modelle-in-der-praktischen-anwendung"><i class="fa fa-check"></i><b>3.3</b> <em>Fixed effects</em> Modelle in der praktischen Anwendung</a></li>
<li class="chapter" data-level="3.4" data-path="fixed-effects-modelle.html"><a href="fixed-effects-modelle.html#conclusio-vor--und-nachteile-des-fixed-effects-modells"><i class="fa fa-check"></i><b>3.4</b> Conclusio: Vor- und Nachteile des <em>fixed effects</em> Modells</a></li>
<li class="chapter" data-level="3.5" data-path="fixed-effects-modelle.html"><a href="fixed-effects-modelle.html#übungsaufgaben-2"><i class="fa fa-check"></i><b>3.5</b> Übungsaufgaben 2</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="random-effects-modelle.html"><a href="random-effects-modelle.html"><i class="fa fa-check"></i><b>4</b> <em>Random effects</em> Modelle</a><ul>
<li class="chapter" data-level="4.1" data-path="random-effects-modelle.html"><a href="random-effects-modelle.html#einführung-random-effects-modelle-für-paneldaten"><i class="fa fa-check"></i><b>4.1</b> Einführung: Random effects Modelle für Paneldaten</a></li>
<li class="chapter" data-level="4.2" data-path="random-effects-modelle.html"><a href="random-effects-modelle.html#random-effects-modelle-mit-plm"><i class="fa fa-check"></i><b>4.2</b> Random effects Modelle mit <code>plm</code></a></li>
<li class="chapter" data-level="4.3" data-path="random-effects-modelle.html"><a href="random-effects-modelle.html#kurze-einführung-zu-mixed-effects-modellen"><i class="fa fa-check"></i><b>4.3</b> Kurze Einführung zu mixed effects Modellen</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="within-between-models.html"><a href="within-between-models.html"><i class="fa fa-check"></i><b>5</b> Within-between models</a></li>
<li class="chapter" data-level="" data-path="literatur.html"><a href="literatur.html"><i class="fa fa-check"></i>Literatur</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Mini-Workshop Panel Data Analysis</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="random-effects-modelle" class="section level1">
<h1><span class="header-section-number">Abschnitt 4</span> <em>Random effects</em> Modelle</h1>
<ul>
<li>In diesem Abschnitt beschäftigen wir uns mit <em>random effects</em> Modellen. Zuerst führen wir die Modellklasse ein. Dann betrachten wir kurz, wie die Modelle in der Tradition der Ökonometrie mit <code>plm</code> spezifiziert werden können, bevor wir zur allgemeineren Umsetzung mit dem Paket für Mehrebenen- bzw. <em>mixed effects</em> Modelle <code>lme4</code> kommen.</li>
</ul>
<div id="einführung-random-effects-modelle-für-paneldaten" class="section level2">
<h2><span class="header-section-number">4.1</span> Einführung: Random effects Modelle für Paneldaten</h2>
<div id="modellspezifikation" class="section level3 unnumbered">
<h3>Modellspezifikation</h3>
<ul>
<li>Anstatt für jede Einheit (Person) eine separate Konstante <span class="math inline">\(\alpha_i\)</span> zu schätzen, können wir den “soft constraint” <span class="citation">(Gelman and Hill <a href="#ref-gelmanDataAnalysisUsing2006">2006</a>, S. 257)</span> setzen, dass die personenspezifischen Konstanten bzw. Residuen einer Verteilung folgen:
<ul>
<li><span class="math inline">\(\alpha_{i} ∼ \mathcal{N}(\mu_{\alpha},\sigma^2_\alpha)\)</span> mit <span class="math inline">\(i = 1,...,n\)</span></li>
</ul></li>
<li><p>Das <em>random effects</em> Panel-Modell wird geschätzt als</p>
<ul>
<li><span class="math inline">\(y_{it}=x_{it}&#39;\beta + z_i&#39;\gamma + v_{it}\)</span></li>
<li><span class="math inline">\(v_{it} = \alpha_{i} + u_{it}\)</span></li>
<li>mit <span class="math inline">\(y_{it}\)</span> über Personen (<span class="math inline">\(i\)</span>) und Zeit (<span class="math inline">\(t\)</span>) variierendes Kriterium, <span class="math inline">\(x_{it}&#39;\)</span> über Personen und Zeit variierende Prädiktoren, <span class="math inline">\(\beta\)</span> Koeffizienten der über Personen und Zeit variierenden Prädiktoren, <span class="math inline">\(z_i&#39;\)</span> über Personen variierende Prädiktoren, <span class="math inline">\(\gamma\)</span> Koeffizienten der über Personen variierenden Prädiktoren, <span class="math inline">\(v_{it}\)</span> gesamter Fehlerterm, <span class="math inline">\(\alpha_{i}\)</span> personenspezifische Konstanten, <span class="math inline">\(u_{it}\)</span> Residuen.</li>
</ul></li>
<li>Damit die Schätzer für <span class="math inline">\(\beta&#39;\)</span> unverzerrt sind, müssen zwei Annahmen erfüllt sein:
<ol style="list-style-type: decimal">
<li>Keine über die Zeit konstante Heterogenität, deren Ursache nicht im Modell ist</li>
</ol>
<ul>
<li><span class="math inline">\({\displaystyle \operatorname {E} (\alpha _{i}|x_{it})=\operatorname {E} (\alpha _{i})=0}\)</span></li>
</ul>
<ol start="2" style="list-style-type: decimal">
<li>Keine über die Zeit variierende Heterogenität, deren Ursache nicht im Modell ist</li>
</ol>
<ul>
<li><span class="math inline">\({\displaystyle \operatorname {E} (u_{it}|x_{it},\alpha _{i})=0,\quad t=1,...,T.}\)</span></li>
</ul></li>
</ul>
</div>
<div id="vorteile-der-random-effects-modelle-für-panel-daten" class="section level3 unnumbered">
<h3>Vorteile der <em>random effects</em> Modelle für Panel-Daten</h3>
<ul>
<li>Schätzer für über die Zeit konstante Prädiktoren und gleichzeitig Konstante für jede Person.</li>
<li>Schätzer von über die Zeit variierenden und über die Zeit konstanten Prädiktoren können verglichen werden.</li>
<li>Vorhersagen für neue Personen außerhab der Stichprobe können unter Einbeziehung aller Informationen und unter Berücksichtigung der gesamten Unsicherheit gemacht werden.</li>
<li>Die Annahme honogener Treatment-Effekte kann gelocketer werden (mit dem within-between-Modell; siehe nächsten Abschnitt).</li>
</ul>
</div>
<div id="sind-die-annahmen-des-random-effects-modell-für-paneldaten-jemals-erfüllt" class="section level3 unnumbered">
<h3>Sind die Annahmen des <em>random effects</em> Modell für Paneldaten jemals erfüllt?</h3>
<blockquote>
<p>The only difference between RE and FE lies in the assumption they make about the relationship between υ and the observed predictors: RE models assume that the observed predictors in the model are not correlated with <span class="math inline">\(v\)</span> while FE models allow them to be correlated.</p>
</blockquote>
<blockquote>
<p>A moment’s reflection on what <span class="math inline">\(v\)</span> represents—–all unmeasured time-constant factors about the respondent—–should lead anyone to realize that the RE assumption is heroic in social research, to say the least.</p>
</blockquote>
<blockquote>
<p>The idea that the characteristics we don’t (or can’t) measure (like personality or genetic influences) are uncorrelated with the things we usually do measure (like income or church attendance) is implausible. — <span class="citation">Vaisey and Miles (<a href="#ref-vaiseyWhatYouCan2017">2017</a>)</span>, S. 47</p>
</blockquote>
</div>
<div id="hausman-test" class="section level3 unnumbered">
<h3>Hausman-Test</h3>
<ul>
<li>Der Hausman-Test prüft, ob das <em>random effects</em> Modell konsistent ist (~ geschätzt werden darf).</li>
<li>Nach der traditionellen Sichtweise der Ökonometrie spricht das Verwerfen der <span class="math inline">\(H_0\)</span> im Hausman-Test gegen das Schätzen eines <em>random effects</em> Modells.</li>
<li>Da das <em>random effecs</em> Modell in der Lage ist, Forschungsfragen zu beantworten, an denen das <em>fixed effects</em> Modell per Definition scheitert, lässt sich die Wahl des <em>random effects</em> Modells auch inhaltlich begründen — ohne einen Hausman-Test durchzuführen.</li>
<li>Der Hausman-Test kann mit der Funktion <code>plm::phtest()</code> durchgeführt werden.</li>
</ul>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="kw">phtest</span>(verh1 <span class="op">~</span><span class="st"> </span>verhint1, <span class="dt">data =</span> d, <span class="dt">index =</span> <span class="st">&quot;IDsosci&quot;</span>)</a></code></pre></div>
<pre><code>## 
##  Hausman Test
## 
## data:  verh1 ~ verhint1
## chisq = 300.58, df = 1, p-value &lt; 2.2e-16
## alternative hypothesis: one model is inconsistent</code></pre>
<ul>
<li>In diesem Beispiel spricht der Hausman-Test dagegen, ein <em>random effects</em> Modell zu schätzen.</li>
</ul>
</div>
</div>
<div id="random-effects-modelle-mit-plm" class="section level2">
<h2><span class="header-section-number">4.2</span> Random effects Modelle mit <code>plm</code></h2>
<ul>
<li><em>Random effects</em> Modelle für Paneldaten in der ökonometrischen Tradition lassen sich mit <code>plm</code> schätzen. Die Schätzung erfolgt auf Basis von Transformationen im Least-squares-Framework (ich habe keine Ahnung, wie das funktioniert). Ich selbst nutze diese Funktionalität in der Praxis nicht. Die Modellspezifikationen sind im Folgenden der Vollständigkeit halber kurz aufgeführt.</li>
</ul>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1"><span class="co"># Einfaches RE Modell</span></a>
<a class="sourceLine" id="cb3-2" data-line-number="2">d <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">plm</span>(verh1 <span class="op">~</span><span class="st"> </span>verhint1, <span class="dt">data =</span> ., <span class="dt">index =</span> <span class="st">&quot;IDsosci&quot;</span>, <span class="dt">model =</span> <span class="st">&quot;random&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">summary</span>()</a></code></pre></div>
<pre><code>## Oneway (individual) effect Random Effect Model 
##    (Swamy-Arora&#39;s transformation)
## 
## Call:
## plm(formula = verh1 ~ verhint1, data = ., model = &quot;random&quot;, index = &quot;IDsosci&quot;)
## 
## Balanced Panel: n = 576, T = 4, N = 2304
## 
## Effects:
##                   var std.dev share
## idiosyncratic 0.32064 0.56625 0.812
## individual    0.07443 0.27283 0.188
## theta: 0.2799
## 
## Residuals:
##      Min.   1st Qu.    Median   3rd Qu.      Max. 
## -2.444787 -0.105500 -0.072748  0.038935  3.647334 
## 
## Coefficients:
##             Estimate Std. Error z-value  Pr(&gt;|z|)    
## (Intercept)  0.56905    0.02764  20.587 &lt; 2.2e-16 ***
## verhint1     0.53198    0.01195  44.517 &lt; 2.2e-16 ***
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Total Sum of Squares:    1531.9
## Residual Sum of Squares: 823.22
## R-Squared:      0.46262
## Adj. R-Squared: 0.46239
## Chisq: 1981.77 on 1 DF, p-value: &lt; 2.22e-16</code></pre>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1"><span class="co"># Mit zusätzlichem Faktor Welle</span></a>
<a class="sourceLine" id="cb5-2" data-line-number="2">d <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">plm</span>(verh1 <span class="op">~</span><span class="st"> </span>verhint1, <span class="dt">data =</span> ., <span class="dt">index =</span> <span class="kw">c</span>(<span class="st">&quot;IDsosci&quot;</span>, <span class="st">&quot;wave&quot;</span>), <span class="dt">model =</span> <span class="st">&quot;random&quot;</span>, </a>
<a class="sourceLine" id="cb5-3" data-line-number="3">    <span class="dt">effect =</span> <span class="st">&quot;twoways&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">summary</span>()</a></code></pre></div>
<pre><code>## Twoways effects Random Effect Model 
##    (Swamy-Arora&#39;s transformation)
## 
## Call:
## plm(formula = verh1 ~ verhint1, data = ., effect = &quot;twoways&quot;, 
##     model = &quot;random&quot;, index = c(&quot;IDsosci&quot;, &quot;wave&quot;))
## 
## Balanced Panel: n = 576, T = 4, N = 2304
## 
## Effects:
##                    var  std.dev share
## idiosyncratic 0.316542 0.562621 0.802
## individual    0.075459 0.274699 0.191
## time          0.002634 0.051326 0.007
## theta: 0.2845 (id) 0.5845 (time) 0.2541 (total)
## 
## Residuals:
##      Min.   1st Qu.    Median   3rd Qu.      Max. 
## -2.479856 -0.114351 -0.069742  0.041790  3.672248 
## 
## Coefficients:
##             Estimate Std. Error z-value  Pr(&gt;|z|)    
## (Intercept) 0.572357   0.038978  14.684 &lt; 2.2e-16 ***
## verhint1    0.530146   0.012141  43.666 &lt; 2.2e-16 ***
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Total Sum of Squares:    1494.2
## Residual Sum of Squares: 817.26
## R-Squared:      0.45304
## Adj. R-Squared: 0.4528
## Chisq: 1906.68 on 1 DF, p-value: &lt; 2.22e-16</code></pre>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" data-line-number="1"><span class="co"># Mit FE für Welle</span></a>
<a class="sourceLine" id="cb7-2" data-line-number="2">d <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">plm</span>(verh1 <span class="op">~</span><span class="st"> </span>verhint1 <span class="op">+</span><span class="st"> </span><span class="kw">factor</span>(wave), <span class="dt">data =</span> ., <span class="dt">index =</span> <span class="st">&quot;IDsosci&quot;</span>, <span class="dt">model =</span> <span class="st">&quot;random&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb7-3" data-line-number="3"><span class="st">    </span><span class="kw">summary</span>()</a></code></pre></div>
<pre><code>## Oneway (individual) effect Random Effect Model 
##    (Swamy-Arora&#39;s transformation)
## 
## Call:
## plm(formula = verh1 ~ verhint1 + factor(wave), data = ., model = &quot;random&quot;, 
##     index = &quot;IDsosci&quot;)
## 
## Balanced Panel: n = 576, T = 4, N = 2304
## 
## Effects:
##                   var std.dev share
## idiosyncratic 0.31654 0.56262 0.808
## individual    0.07546 0.27470 0.192
## theta: 0.2845
## 
## Residuals:
##      Min.   1st Qu.    Median   3rd Qu.      Max. 
## -2.504920 -0.134512 -0.067223  0.050991  3.693574 
## 
## Coefficients:
##                 Estimate Std. Error z-value Pr(&gt;|z|)    
## (Intercept)    0.5664150  0.0330635 17.1311  &lt; 2e-16 ***
## verhint1       0.5300058  0.0121863 43.4918  &lt; 2e-16 ***
## factor(wave)2 -0.0453317  0.0353413 -1.2827  0.19960    
## factor(wave)3  0.0672896  0.0353937  1.9012  0.05728 .  
## factor(wave)4  0.0028266  0.0358023  0.0789  0.93707    
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Total Sum of Squares:    1521.3
## Residual Sum of Squares: 816.62
## R-Squared:      0.46322
## Adj. R-Squared: 0.46229
## Chisq: 1983.94 on 4 DF, p-value: &lt; 2.22e-16</code></pre>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" data-line-number="1"><span class="co"># Mit Prädiktor auf Personenebene (funktioniert nicht in FE, siehe oben)</span></a>
<a class="sourceLine" id="cb9-2" data-line-number="2">d <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">plm</span>(verh1 <span class="op">~</span><span class="st"> </span>verhint1 <span class="op">+</span><span class="st"> </span>C_sex, <span class="dt">data =</span> ., <span class="dt">index =</span> <span class="kw">c</span>(<span class="st">&quot;IDsosci&quot;</span>, <span class="st">&quot;wave&quot;</span>), <span class="dt">model =</span> <span class="st">&quot;random&quot;</span>, </a>
<a class="sourceLine" id="cb9-3" data-line-number="3">    <span class="dt">effect =</span> <span class="st">&quot;twoways&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">summary</span>()</a></code></pre></div>
<pre><code>## Twoways effects Random Effect Model 
##    (Swamy-Arora&#39;s transformation)
## 
## Call:
## plm(formula = verh1 ~ verhint1 + C_sex, data = ., effect = &quot;twoways&quot;, 
##     model = &quot;random&quot;, index = c(&quot;IDsosci&quot;, &quot;wave&quot;))
## 
## Balanced Panel: n = 576, T = 4, N = 2304
## 
## Effects:
##                    var  std.dev share
## idiosyncratic 0.316542 0.562621 0.803
## individual    0.074785 0.273468 0.190
## time          0.002634 0.051326 0.007
## theta: 0.283 (id) 0.5845 (time) 0.2527 (total)
## 
## Residuals:
##      Min.   1st Qu.    Median   3rd Qu.      Max. 
## -2.443232 -0.153532 -0.048115  0.047936  3.701927 
## 
## Coefficients:
##              Estimate Std. Error z-value  Pr(&gt;|z|)    
## (Intercept)  0.642039   0.045454 14.1249 &lt; 2.2e-16 ***
## verhint1     0.527641   0.012153 43.4168 &lt; 2.2e-16 ***
## C_sex       -0.106628   0.035587 -2.9963  0.002733 ** 
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Total Sum of Squares:    1497.8
## Residual Sum of Squares: 815.06
## R-Squared:      0.45581
## Adj. R-Squared: 0.45534
## Chisq: 1927.32 on 2 DF, p-value: &lt; 2.22e-16</code></pre>
</div>
<div id="kurze-einführung-zu-mixed-effects-modellen" class="section level2">
<h2><span class="header-section-number">4.3</span> Kurze Einführung zu mixed effects Modellen</h2>
<ul>
<li>Auch bekannt als <em>random effects</em>, <em>multilevel</em>/<em>Mehrebenen-</em> oder <em>hierarchical</em>/<em>hierarchische</em> Modelle; das Begriffswirrwarr ist ein großes Problem, das Denglisch macht es nicht besser <span class="citation">(Gelman and Hill <a href="#ref-gelmanDataAnalysisUsing2006">2006</a>)</span>.</li>
<li><p>Wer mit diesen Modellen bereits vertraut ist, kann diesen Absatz übersrpingen.</p></li>
<li>Ganz allgemein gesprochen sind <em>mixed effects</em> Modelle Regressionsmodelle für Beobachtungen von Einheiten, die in irgendeiner Art miteinander zu tun haben, also nicht unabhängig voneinander sind.</li>
<li>Typische Beispiele sind Schüler*innen in Klassen in Schulen, Patient*innen in Krankenhäuser, Wähler*innen in Wahlkreisen, … .</li>
<li>Die Bezeichnung <em>mixed effects</em> geht darauf zurück, dass in den Modellen sowohl <em>random effects</em> (Koeffizienten, die zwischen den Fällen innerhalb einer Gruppierung auf einer höheren Ebene variieren) als auch <em>fixed effects</em> (Koeffizienten, die für alle Fälle gleich sind) spezifiziert werden.</li>
<li><p>Paneldaten haben immer eine hierarchische Struktur: Beobachtungen (Level 1) sind innerhalb der Personen (Level 2) gruppiert.</p></li>
</ul>
<div id="warum-wir-in-den-sozialwissenschaften-nicht-nur-die-traditionellen-ökonometrischen-modelle-verwenden" class="section level3 unnumbered">
<h3>Warum wir in den Sozialwissenschaften nicht (nur) die traditionellen ökonometrischen Modelle verwenden</h3>
<blockquote>
<p>Econometrics deal mostly with non-experimental data. Great emphasis is put on specification procedures and misspecification testing. Model specifications tend therefore to be very simple, while great attention is put on the issues of endogeneity of the regressors, dependence structures in the errors and robustness of the estimators under deviations from normality. — <span class="citation">Croissant and Millo (<a href="#ref-plm2008">2008</a>)</span></p>
</blockquote>
<ul>
<li><p>Historsiche Gründe und disziplinäre Entwicklungen: z.B. Ökonometriker bevorzugen fast immer Least Squares, andere Disziplinen Maximum Likelihood oder Bayesianische Methoden.</p></li>
<li><p>Viele Sozialwissenschaften haben kompliziertere Datenstrukturen als das typische ökonometrische Panel, z.B. mehr als zwei Ebenen, nicht-hierarchische Datenstrukturen, heterogene Treatment-Effkte, … . Die flexible Modellierung solcher Strukturen gilt oft als wichtiger als die enger gefassten Schätz- und Identifikationsfragen, die Ökonometriker umtreiben.</p></li>
<li><p>Die Ökonometrie betrachtet Abhängigkeitsstrukturen als eine Störgröße, deren Einfluss in den Modellen beschränkt werden soll. Andere sozialwissenschaftliche Disziplinen interessieren sich (auch, gerade) für diese Strukturen und ihre Konsequenzen.</p></li>
</ul>
</div>
<div id="vorteile-der-mixed-effects-modelle" class="section level3">
<h3><span class="header-section-number">4.3.1</span> Vorteile der <em>mixed effects</em> Modelle</h3>
<ul>
<li><p><em>Mixed effects</em> Modelle bieten einen einheitlichen Rahmen für die Modellierung von Datensätzen mit jeder Art von Abhängigkeitstrukturen, seien sie hierarchisch, längsschnittlich oder eine Kombination aus beidem.</p></li>
<li><p>Die Schätzung basiert auf (Restricted) Maximum Likelihood, der Umstieg auf bayesianische Schätzmethoden ist relativ einfach. Im Vergleich dazu erfordern die Optionen, Tests und transformationsbasierten Least-Squares-Schätzer in der ökonometrischen Tradition erheblich mehr Einarbeitung, wenn man nicht auf eine entsprechende Ausbildung aufbauen kann.</p></li>
<li><p>Wenn man die Logik von <em>mixed effects</em> Modellen einmal verstanden hat, kann man die Modelle für verschiedenste Forschungsfragen und -desings einsetzen, u.a. Ländervergleiche in der komparativen Forschung, experimentelle within-subject Desings, verschiedene Längsschnittsdesigns wie experience sampling, Tagebücher, digitale Kommunikations- und Verhaltensspuren, … .</p></li>
<li><p>Das Denken in Varianzkomponenten (siehe nächster Absatz) hilft uns, konzeptionell über die Bedeutung von Prädiktoren auf verschiedenen Ebenen nachzudenken.</p></li>
<li><p>Praktische Umsetzung: Das Paket <code>lme4</code> ist einfach zu verwenden und auch ein guter Einstieg in ähnlich aufgebaute Pakte zur bayesianischen Schätzung solcher Modelle (z.B. <code>rstanarm</code>, <code>brms</code>).</p></li>
</ul>
</div>
<div id="varianzdekomposition-und-intraklassen-korrelation" class="section level3 unnumbered">
<h3>Varianzdekomposition und Intraklassen-Korrelation</h3>
<ul>
<li><p>Wir interessieren uns dafür, welcher Anteil in der Varianz in <span class="math inline">\(Y\)</span> auf stabile Unterschiede zwischen den Personen zurück geht und welcher auf Veränderungen innerhalb von Personen (potenielle kausale Effekte).</p></li>
<li>In <em>mixed effects</em> Modellen können wir die Varianz-Anteile in einem sogenannten Null-Modell, das nur die Struktur der Daten abbildet, aber keine Prädiktoren enthält, bestimmen:
<ul>
<li><span class="math inline">\(y_{it}= \alpha + v_{it}\)</span> und <span class="math inline">\(v_{it} = \alpha_{i}+ u_{it}\)</span></li>
</ul></li>
<li>Ohne die Konstante erhalten wir
<ul>
<li><span class="math inline">\(y_{it} = \alpha_{i}+ u_{it}\)</span></li>
</ul></li>
<li><p>Da die Varianzen von <span class="math inline">\(\alpha_i\)</span> und <span class="math inline">\(u_it\)</span> im Modell geschätzt werden, können wir den Anteil der personenspezifischen (Level 2) Varianz und den Anteil der idiosynkratischen Variance in <span class="math inline">\(Y\)</span> berechnen. Der Anteil der Level 2 Varianz an der gesamten Varianz wird auch als Intraklassen-Korrelation (intra-class correlation, ICC, <span class="math inline">\(\rho\)</span>) bezeichnet.</p></li>
<li>In unserem Beispiel möchten wir wissen, welcher Anteil der Varianz im Verlassen der Wohnung ohne trifftigen Grund auf konstante Unterschiede zwischen den Personen zurückgeht (manche Personen wollen oder müssen, aus welchen Gründen auch immer, die Wohnung häufiger verlassen als andere).</li>
<li><p>Dazu spzifizieren wir das Null-Modell mit <code>lme4::lmer()</code>. Das genaue Vorgehen beim Spezifizieren der Modelle folgt im nächsten Abschnitt. Wichtig ist an dieser Stelle, dass mit <code>(1 | IDsosci)</code> jede Person eine eigene Konstante erhält (<span class="math inline">\(\alpha_i\)</span> in der Gleichung oben), die als Abweichung vom Gesamtmittel (<span class="math inline">\(\alpha\)</span>) geschätzt wird.</p></li>
</ul>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" data-line-number="1"><span class="co"># Null-Modell</span></a>
<a class="sourceLine" id="cb11-2" data-line-number="2">m0 =<span class="st"> </span>d <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">lmer</span>(verh1 <span class="op">~</span><span class="st"> </span><span class="dv">1</span> <span class="op">+</span><span class="st"> </span>(<span class="dv">1</span> <span class="op">|</span><span class="st"> </span>IDsosci), <span class="dt">data =</span> .)</a>
<a class="sourceLine" id="cb11-3" data-line-number="3"></a>
<a class="sourceLine" id="cb11-4" data-line-number="4">m0 <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">summary</span>()</a></code></pre></div>
<pre><code>## Linear mixed model fit by REML [&#39;lmerMod&#39;]
## Formula: verh1 ~ 1 + (1 | IDsosci)
##    Data: .
## 
## REML criterion at convergence: 5576.4
## 
## Scaled residuals: 
##     Min      1Q  Median      3Q     Max 
## -4.1387 -0.2268 -0.1212 -0.1212  4.8131 
## 
## Random effects:
##  Groups   Name        Variance Std.Dev.
##  IDsosci  (Intercept) 0.5938   0.7706  
##  Residual             0.4065   0.6376  
## Number of obs: 2304, groups:  IDsosci, 576
## 
## Fixed effects:
##             Estimate Std. Error t value
## (Intercept)  1.52865    0.03475   43.99</code></pre>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb13-1" data-line-number="1"><span class="co"># ICC &#39;von Hand&#39;</span></a>
<a class="sourceLine" id="cb13-2" data-line-number="2"><span class="kw">round</span>(<span class="fl">0.5938</span><span class="op">/</span>(<span class="fl">0.5938</span> <span class="op">+</span><span class="st"> </span><span class="fl">0.4065</span>), <span class="dv">3</span>)</a></code></pre></div>
<pre><code>## [1] 0.594</code></pre>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb15-1" data-line-number="1"><span class="co"># Mit performance::icc</span></a>
<a class="sourceLine" id="cb15-2" data-line-number="2"><span class="kw">icc</span>(m0)</a></code></pre></div>
<pre><code>## # Intraclass Correlation Coefficient
## 
##      Adjusted ICC: 0.594
##   Conditional ICC: 0.594</code></pre>
<ul>
<li>Fast 60% der Varianz im Verlassen der Wohnung geht auf Unterschiede zwischen Personen zurück.</li>
<li><p>Im <em>fixed effects</em> Modell wird diese Varianz einfach aus den Daten entfernt. Über mehr als die Hälfte der Unterschiede können wir mit diesen Modellen also per Spezifikationslogik nicht aussagen.</p></li>
<li>Kausale Effekte innerhalb der Personen können damit <em>maximal</em> für 40% der Varianz verantwortlich sein.</li>
<li><p>Allerdings müssen wir dabei beachten, dass auch der gesamte Messfehler (zumindest die zufällige Messfehlervarianz nach der CTT) ebenfalls in diesem Varianzanteil steckt.</p></li>
</ul>

</div>
</div>
</div>
<h3>Literatur</h3>
<div id="refs" class="references">
<div id="ref-plm2008">
<p>Croissant, Yves, and Giovanni Millo. 2008. “Panel Data Econometrics in R: The plm Package.” <em>Journal of Statistical Software</em> 27 (2): 1–43. <a href="https://doi.org/10.18637/jss.v027.i02">https://doi.org/10.18637/jss.v027.i02</a>.</p>
</div>
<div id="ref-gelmanDataAnalysisUsing2006">
<p>Gelman, A., and J. Hill. 2006. <em>Data Analysis Using Regression and Multilevel/Hierarchical Models</em>. New York: Cambridge University Press.</p>
</div>
<div id="ref-vaiseyWhatYouCan2017">
<p>Vaisey, Stephen, and Andrew Miles. 2017. “What You Canand Can’tDo with Three-Wave Panel Data.” <em>Sociological Methods &amp; Research</em> 46 (1): 44–67. <a href="https://doi.org/10.1177/0049124114547769">https://doi.org/10.1177/0049124114547769</a>.</p>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="fixed-effects-modelle.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="within-between-models.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["workshop_panel.pdf"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
