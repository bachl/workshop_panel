<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Abschnitt 5 Hybride within-between Modelle | Mini-Workshop Panel Data Analysis</title>
  <meta name="description" content="Material für den Mini-Workshop Panel Data Analysis" />
  <meta name="generator" content="bookdown 0.17 and GitBook 2.6.7" />

  <meta property="og:title" content="Abschnitt 5 Hybride within-between Modelle | Mini-Workshop Panel Data Analysis" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Material für den Mini-Workshop Panel Data Analysis" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Abschnitt 5 Hybride within-between Modelle | Mini-Workshop Panel Data Analysis" />
  
  <meta name="twitter:description" content="Material für den Mini-Workshop Panel Data Analysis" />
  

<meta name="author" content="Marko Bachl (mit Material von Michael Scharkow)" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="random-effects-modelle.html"/>
<link rel="next" href="literatur.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />











<style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Panel Data Analysis</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Überblick</a><ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#inhalt-des-virtuellen-mini-workshops"><i class="fa fa-check"></i><b>1.1</b> Inhalt des virtuellen Mini-Workshops</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#welche-inhalte-wir-nicht-behandeln"><i class="fa fa-check"></i><b>1.2</b> Welche Inhalte wir nicht behandeln</a></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#aufbau-des-workshops"><i class="fa fa-check"></i><b>1.3</b> Aufbau des Workshops</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="einführung.html"><a href="einführung.html"><i class="fa fa-check"></i><b>2</b> Einführung</a><ul>
<li class="chapter" data-level="2.1" data-path="einführung.html"><a href="einführung.html#längsschnittdaten"><i class="fa fa-check"></i><b>2.1</b> Längsschnittdaten</a></li>
<li class="chapter" data-level="2.2" data-path="einführung.html"><a href="einführung.html#beispiel-daten"><i class="fa fa-check"></i><b>2.2</b> Beispiel-Daten</a></li>
<li class="chapter" data-level="2.3" data-path="einführung.html"><a href="einführung.html#pooled-ols-wrong"><i class="fa fa-check"></i><b>2.3</b> Pooled OLS (WRONG!)</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="fixed-effects-modelle.html"><a href="fixed-effects-modelle.html"><i class="fa fa-check"></i><b>3</b> Fixed effects Modelle</a><ul>
<li class="chapter" data-level="3.1" data-path="fixed-effects-modelle.html"><a href="fixed-effects-modelle.html#konzeptionelle-einführung"><i class="fa fa-check"></i><b>3.1</b> Konzeptionelle Einführung</a></li>
<li class="chapter" data-level="3.2" data-path="fixed-effects-modelle.html"><a href="fixed-effects-modelle.html#übungsaufgaben-1"><i class="fa fa-check"></i><b>3.2</b> Übungsaufgaben 1</a></li>
<li class="chapter" data-level="3.3" data-path="fixed-effects-modelle.html"><a href="fixed-effects-modelle.html#fixed-effects-modelle-in-der-praktischen-anwendung"><i class="fa fa-check"></i><b>3.3</b> <em>Fixed effects</em> Modelle in der praktischen Anwendung</a></li>
<li class="chapter" data-level="3.4" data-path="fixed-effects-modelle.html"><a href="fixed-effects-modelle.html#zusammenfassung-vor--und-nachteile-des-fixed-effects-modells"><i class="fa fa-check"></i><b>3.4</b> Zusammenfassung: Vor- und Nachteile des <em>fixed effects</em> Modells</a></li>
<li class="chapter" data-level="3.5" data-path="fixed-effects-modelle.html"><a href="fixed-effects-modelle.html#übungsaufgaben-2"><i class="fa fa-check"></i><b>3.5</b> Übungsaufgaben 2</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="random-effects-modelle.html"><a href="random-effects-modelle.html"><i class="fa fa-check"></i><b>4</b> <em>Random effects</em> Modelle</a><ul>
<li class="chapter" data-level="4.1" data-path="random-effects-modelle.html"><a href="random-effects-modelle.html#einführung-random-effects-modelle-für-paneldaten"><i class="fa fa-check"></i><b>4.1</b> Einführung: Random effects Modelle für Paneldaten</a></li>
<li class="chapter" data-level="4.2" data-path="random-effects-modelle.html"><a href="random-effects-modelle.html#random-effects-modelle-mit-plm"><i class="fa fa-check"></i><b>4.2</b> Random effects Modelle mit <code>plm</code></a></li>
<li class="chapter" data-level="4.3" data-path="random-effects-modelle.html"><a href="random-effects-modelle.html#kurze-einführung-zu-mixed-effects-modellen"><i class="fa fa-check"></i><b>4.3</b> Kurze Einführung zu mixed effects Modellen</a></li>
<li class="chapter" data-level="4.4" data-path="random-effects-modelle.html"><a href="random-effects-modelle.html#übungsaufgaben-3"><i class="fa fa-check"></i><b>4.4</b> Übungsaufgaben 3</a></li>
<li class="chapter" data-level="4.5" data-path="random-effects-modelle.html"><a href="random-effects-modelle.html#random-effects-panel-modelle-mit-lme4"><i class="fa fa-check"></i><b>4.5</b> Random effects panel Modelle mit <code>lme4</code></a></li>
<li class="chapter" data-level="4.6" data-path="random-effects-modelle.html"><a href="random-effects-modelle.html#übungsaufgaben-4"><i class="fa fa-check"></i><b>4.6</b> Übungsaufgaben 4</a></li>
<li class="chapter" data-level="4.7" data-path="random-effects-modelle.html"><a href="random-effects-modelle.html#variierende-koeffizienten-random-slopes-und-ebenen-überschreitende-interaktionen-cross-level-interactions"><i class="fa fa-check"></i><b>4.7</b> Variierende Koeffizienten (random slopes) und Ebenen-überschreitende Interaktionen (cross-level interactions)</a></li>
<li class="chapter" data-level="4.8" data-path="random-effects-modelle.html"><a href="random-effects-modelle.html#übungsaufgaben-5"><i class="fa fa-check"></i><b>4.8</b> Übungsaufgaben 5</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="hybride-within-between-modelle.html"><a href="hybride-within-between-modelle.html"><i class="fa fa-check"></i><b>5</b> Hybride <em>within-between</em> Modelle</a><ul>
<li class="chapter" data-level="5.1" data-path="hybride-within-between-modelle.html"><a href="hybride-within-between-modelle.html#das-beste-aus-beiden-welten"><i class="fa fa-check"></i><b>5.1</b> Das Beste aus beiden Welten?</a></li>
<li class="chapter" data-level="5.2" data-path="hybride-within-between-modelle.html"><a href="hybride-within-between-modelle.html#spezifikation-des-within-between-modells"><i class="fa fa-check"></i><b>5.2</b> Spezifikation des <em>within-between</em> Modells</a></li>
<li class="chapter" data-level="5.3" data-path="hybride-within-between-modelle.html"><a href="hybride-within-between-modelle.html#übungsaufgaben-6"><i class="fa fa-check"></i><b>5.3</b> Übungsaufgaben 6</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="literatur.html"><a href="literatur.html"><i class="fa fa-check"></i>Literatur</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Mini-Workshop Panel Data Analysis</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="hybride-within-between-modelle" class="section level1">
<h1><span class="header-section-number">Abschnitt 5</span> Hybride <em>within-between</em> Modelle</h1>
<div id="das-beste-aus-beiden-welten" class="section level2">
<h2><span class="header-section-number">5.1</span> Das Beste aus beiden Welten?</h2>
<ul>
<li><p>Ein häufiger Einwand gegen <em>random effects</em> Panelmodelle ist, dass die Annahme nicht mit den <em>random intercepts</em> korrelierter, über die Zeit konstanter Variablen (beobachtet wie unbeobachtet) so stark ist, dass sie in den Sozialwissenschaften eigentlich nie einzuhalten ist (siehe Abschnitt 4.1).</p></li>
<li><p>Trotzdem sind <em>random effects</em> Panelmodelle weit verbreitet, da sie uns erlauben, über die Zeit variierende Variablen und über die Zeit konstante Personenmerkmale als Prädiktoren in ein Modell aufzunehmen. Häufig sind wir eben sowohl an kausalen Effekten als auch an Unterschieden zwischen Personen interessiert.</p></li>
<li><p>Außerdem ist gerade die Möglichkeit, unspezifische Heterogenität in Treatment-Effekten zuzulassen, in den Sozialwissenschaften sehr attraktiv. Eigentlich gehen wir fast immer davon aus, dass Effekte variabel sind und nicht alle Personen gleichermaßen betreffen.</p></li>
<li><p>Das hybride <em>within-between</em> Modell verspricht, unverzerrte kausale <em>within-person</em> Effekte der über die Zeit variierenden Prädiktoren <strong>und</strong> <em>between-person</em> Vergleiche innerhalb eines Modells zu schätzen.</p></li>
<li><p>Dazu werden die über die Zeit variierenden Prädiktoren transformiert und in zwei Variablen aufgeteilt:</p>
<ul>
<li><span class="math inline">\(x_{it}-\bar{x_i}\)</span> ist der um den Personen-Mittelwert bereinigte <em>within-person</em> Prädiktor.</li>
<li><span class="math inline">\(\bar{x_i}\)</span> ist der Personen-Mittelwert als <em>between-person</em> Prädiktor.</li>
</ul></li>
<li><p>Der Koeffizient des <em>within-person</em> Prädiktors entspricht dem <em>fixed effects</em> Schätzer (siehe Abschnitt 3.1, Within Transformation). Der Koeffizient des <em>between-person</em> Prädiktors quantifiziert die Unterschiede der Personen in <span class="math inline">\(y\)</span>, die durch über die Zeit stabile Unterschiede in <span class="math inline">\(x\)</span> erklärt werden.</p></li>
<li><p>Ein Blick auf die Varianzaufklärung im ersten Beispiel zum <em>random effects</em> Panelmodell in Abschnitt 4.5 zeigt, warum die Trennung dieser beiden Effekte sinnvoll ist. Das Ergebnis ist hier noch einmal reproduziert.</p></li>
</ul>
<div class="sourceCode" id="cb125"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb125-1"><a href="hybride-within-between-modelle.html#cb125-1"></a>m1 <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">summary</span>(<span class="dt">correlation =</span> <span class="ot">FALSE</span>)</span></code></pre></div>
<pre><code>## Linear mixed model fit by REML. t-tests use Satterthwaite&#39;s method [
## lmerModLmerTest]
## Formula: verh1 ~ verhint1 + (1 | IDsosci)
##    Data: d
## 
## REML criterion at convergence: 4554
## 
## Scaled residuals: 
##    Min     1Q Median     3Q    Max 
## -4.524 -0.202 -0.085  0.165  5.793 
## 
## Random effects:
##  Groups   Name        Variance Std.Dev.
##  IDsosci  (Intercept) 0.111    0.334   
##  Residual             0.341    0.584   
## Number of obs: 2304, groups:  IDsosci, 576
## 
## Fixed effects:
##              Estimate Std. Error        df t value Pr(&gt;|t|)    
## (Intercept)    0.5987     0.0287  975.4311    20.9   &lt;2e-16 ***
## verhint1       0.5155     0.0122 1747.0982    42.3   &lt;2e-16 ***
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1</code></pre>
<div class="sourceCode" id="cb127"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb127-1"><a href="hybride-within-between-modelle.html#cb127-1"></a><span class="kw">r2</span>(m1, <span class="dt">by_group =</span> <span class="ot">TRUE</span>)</span></code></pre></div>
<pre><code>## # Explained Variance by Level
## 
## Level   |    R2
## ---------------
## Level 1 | 0.161
## IDsosci | 0.812</code></pre>
<ul>
<li>Die Verhaltensintention erklärt sowohl 81% der Varianz zwischen den Personen als auch 16% der Varianz innerhalb der Personen. Wir erhalten aber nur einen Koeffizienten, in dem der <em>within-person</em> Effekt und der <em>between-person</em> Unterschied untrennbar vermischt sind.</li>
</ul>
</div>
<div id="spezifikation-des-within-between-modells" class="section level2">
<h2><span class="header-section-number">5.2</span> Spezifikation des <em>within-between</em> Modells</h2>
<div id="within-between-modell-mit-random-intercept" class="section level3 unnumbered">
<h3><em>within-between</em> Modell mit <em>random intercept</em></h3>
<ul>
<li><p>Wir untersuchen wieder den Effekt der Intention, die Wohnung ohne triftigen Grund zu verlassen, auf den Bericht, dies getan zu haben.</p></li>
<li><p>Zuerst transformieren wir den Prädiktor <code>verhint1</code> in einen <em>within</em>-Prädiktor <code>verhint1_w</code> und einen <em>between</em>-Prädiktor <code>verhint1_b</code>.</p></li>
</ul>
<div class="sourceCode" id="cb129"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb129-1"><a href="hybride-within-between-modelle.html#cb129-1"></a><span class="co"># Transformation: Trennen von within- und between-Prädiktor</span></span>
<span id="cb129-2"><a href="hybride-within-between-modelle.html#cb129-2"></a>d =<span class="st"> </span>d <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb129-3"><a href="hybride-within-between-modelle.html#cb129-3"></a><span class="st">  </span><span class="kw">group_by</span>(IDsosci) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb129-4"><a href="hybride-within-between-modelle.html#cb129-4"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">verhint1_w =</span> verhint1 <span class="op">-</span><span class="st"> </span><span class="kw">mean</span>(verhint1), <span class="co"># within</span></span>
<span id="cb129-5"><a href="hybride-within-between-modelle.html#cb129-5"></a>         <span class="dt">verhint1_b =</span> <span class="kw">mean</span>(verhint1)) <span class="op">%&gt;%</span><span class="st"> </span><span class="co"># between</span></span>
<span id="cb129-6"><a href="hybride-within-between-modelle.html#cb129-6"></a><span class="st">  </span><span class="kw">ungroup</span>()</span>
<span id="cb129-7"><a href="hybride-within-between-modelle.html#cb129-7"></a><span class="co"># Zwei Personen zur Illustration</span></span>
<span id="cb129-8"><a href="hybride-within-between-modelle.html#cb129-8"></a>d <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb129-9"><a href="hybride-within-between-modelle.html#cb129-9"></a><span class="st">  </span><span class="kw">filter</span>(IDsosci <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;050IPY&quot;</span>, <span class="st">&quot;02E6C8&quot;</span>)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb129-10"><a href="hybride-within-between-modelle.html#cb129-10"></a><span class="st">  </span><span class="kw">select</span>(IDsosci, wave, <span class="kw">starts_with</span>(<span class="st">&quot;verhint1&quot;</span>))</span></code></pre></div>
<pre><code>## # A tibble: 8 x 5
##   IDsosci  wave verhint1 verhint1_w verhint1_b
##   &lt;chr&gt;   &lt;int&gt;    &lt;dbl&gt;      &lt;dbl&gt;      &lt;dbl&gt;
## 1 02E6C8      1        1         -1          2
## 2 02E6C8      2        2          0          2
## 3 02E6C8      3        2          0          2
## 4 02E6C8      4        3          1          2
## 5 050IPY      1        3         -1          4
## 6 050IPY      2        3         -1          4
## 7 050IPY      3        5          1          4
## 8 050IPY      4        5          1          4</code></pre>
<ul>
<li><p>Am Beispiel von zwei Personen können wir sehen, dass <code>verhint1_b</code> der Mittelwert der Person über die vier Wellen ist und <code>verhint1_w</code> der Messwert in einer Welle bereinigt um den Mittelwert. Es wird auch direkt deutlich, dass <code>verhint1_b</code> nun per Transformationslogik eine über die Zeit konstante Personeneigenschaft ist.</p></li>
<li><p>Die Spezifikation des Modells mit <code>lme4::lmer()</code> folgt derselben Logik wie das <em>random effects</em> Panelmodell in Abschnitt 4.</p>
<ul>
<li>Als Referenz ziehen wir das entsprechende Null-Modell inklusive der <em>fixed effects</em> für die Panelwellen heran.</li>
<li>Wir beginnen wieder mit einem <em>random intercept</em> Modell, <code>(1 | IDsosci)</code>.</li>
<li><code>verhint1_w</code> und <code>verhint1_b</code> werden als Prädiktoren in das Modell aufgenommen.</li>
</ul></li>
</ul>
<div class="sourceCode" id="cb131"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb131-1"><a href="hybride-within-between-modelle.html#cb131-1"></a><span class="co"># Null-Modell als Referenz</span></span>
<span id="cb131-2"><a href="hybride-within-between-modelle.html#cb131-2"></a>wb_<span class="dv">0</span> =<span class="st"> </span><span class="kw">lmer</span>(verh1 <span class="op">~</span><span class="st"> </span><span class="dv">1</span> <span class="op">+</span><span class="st"> </span><span class="kw">factor</span>(wave) <span class="op">+</span><span class="st"> </span>(<span class="dv">1</span> <span class="op">|</span><span class="st"> </span>IDsosci), <span class="dt">data =</span> d)</span>
<span id="cb131-3"><a href="hybride-within-between-modelle.html#cb131-3"></a></span>
<span id="cb131-4"><a href="hybride-within-between-modelle.html#cb131-4"></a><span class="co"># Within-between Modell mit random intercept</span></span>
<span id="cb131-5"><a href="hybride-within-between-modelle.html#cb131-5"></a>wb_ri =<span class="st"> </span><span class="kw">lmer</span>(verh1 <span class="op">~</span><span class="st"> </span>verhint1_w <span class="op">+</span><span class="st"> </span>verhint1_b <span class="op">+</span><span class="st"> </span><span class="kw">factor</span>(wave) <span class="op">+</span><span class="st"> </span>(<span class="dv">1</span> <span class="op">|</span><span class="st"> </span>IDsosci), <span class="dt">data =</span> d)</span>
<span id="cb131-6"><a href="hybride-within-between-modelle.html#cb131-6"></a>wb_ri <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">summary</span>(<span class="dt">correlation =</span> <span class="ot">FALSE</span>)</span></code></pre></div>
<pre><code>## Linear mixed model fit by REML. t-tests use Satterthwaite&#39;s method [
## lmerModLmerTest]
## Formula: verh1 ~ verhint1_w + verhint1_b + factor(wave) + (1 | IDsosci)
##    Data: d
## 
## REML criterion at convergence: 4303
## 
## Scaled residuals: 
##    Min     1Q Median     3Q    Max 
## -5.289 -0.318 -0.044  0.166  6.372 
## 
## Random effects:
##  Groups   Name        Variance Std.Dev.
##  IDsosci  (Intercept) 0.0755   0.275   
##  Residual             0.3165   0.563   
## Number of obs: 2304, groups:  IDsosci, 576
## 
## Fixed effects:
##                Estimate Std. Error        df t value Pr(&gt;|t|)    
## (Intercept)      0.1689     0.0392 1069.4869    4.31 0.000018 ***
## verhint1_w       0.3288     0.0166 1724.0000   19.79  &lt; 2e-16 ***
## verhint1_b       0.7153     0.0159  574.0000   44.86  &lt; 2e-16 ***
## factor(wave)2    0.0200     0.0336 1724.0000    0.60  0.55169    
## factor(wave)3    0.1400     0.0337 1724.0000    4.15 0.000034 ***
## factor(wave)4    0.1178     0.0345 1724.0000    3.41  0.00065 ***
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1</code></pre>
<div class="sourceCode" id="cb133"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb133-1"><a href="hybride-within-between-modelle.html#cb133-1"></a><span class="co"># Varianzreduktion</span></span>
<span id="cb133-2"><a href="hybride-within-between-modelle.html#cb133-2"></a><span class="dv">1</span> <span class="op">-</span><span class="st"> </span>(<span class="kw">sigma</span>(wb_ri)<span class="op">^</span><span class="dv">2</span><span class="op">/</span><span class="kw">sigma</span>(wb_<span class="dv">0</span>)<span class="op">^</span><span class="dv">2</span>)  <span class="co"># L1</span></span></code></pre></div>
<pre><code>## [1] 0.18</code></pre>
<div class="sourceCode" id="cb135"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb135-1"><a href="hybride-within-between-modelle.html#cb135-1"></a><span class="dv">1</span> <span class="op">-</span><span class="st"> </span>(<span class="kw">as.numeric</span>(<span class="kw">VarCorr</span>(wb_ri)<span class="op">$</span>IDsosci)<span class="op">/</span><span class="kw">as.numeric</span>(<span class="kw">VarCorr</span>(wb_<span class="dv">0</span>)<span class="op">$</span>IDsosci))  <span class="co"># L2</span></span></code></pre></div>
<pre><code>## [1] 0.87</code></pre>
<div class="sourceCode" id="cb137"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb137-1"><a href="hybride-within-between-modelle.html#cb137-1"></a><span class="co"># Vergleich mit fixed effects Modell</span></span>
<span id="cb137-2"><a href="hybride-within-between-modelle.html#cb137-2"></a><span class="kw">plm</span>(verh1 <span class="op">~</span><span class="st"> </span>verhint1 <span class="op">+</span><span class="st"> </span><span class="kw">factor</span>(wave), <span class="dt">data =</span> d, <span class="dt">index =</span> <span class="st">&quot;IDsosci&quot;</span>, <span class="dt">model =</span> <span class="st">&quot;within&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb137-3"><a href="hybride-within-between-modelle.html#cb137-3"></a><span class="st">    </span><span class="kw">summary</span>() <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">coef</span>()</span></code></pre></div>
<pre><code>##               Estimate Std. Error t-value Pr(&gt;|t|)
## verhint1          0.33      0.017    19.8  1.0e-78
## factor(wave)2     0.02      0.034     0.6  5.5e-01
## factor(wave)3     0.14      0.034     4.2  3.4e-05
## factor(wave)4     0.12      0.034     3.4  6.5e-04</code></pre>
<ul>
<li>Kausaler Effekt: Wenn die Intention um einen Punkt steigt, dann wird das Verhalten um 0.3 Punkte häufiger. Der Effekt erklärt 18% der Varianz innerhalb der Personen.
<ul>
<li>Der Koeffizient des <em>within</em>-Prädiktors entspricht genau dem Koeffizienten eines klassischen <em>fixed effects</em> Modell, wie wir es z.B. mit <code>plm</code> geschätzt haben.</li>
</ul></li>
<li>Unterschiede zwischen Personen: Zwei Personen, deren durchschnittliche Intention sich um einen Punkt unterscheidet, unterscheiden sich um 0.7 Punkte in ihrer mittleren Häufigkeit, das Haus ohne triftigen Grund zu verlassen. Dieser Zusammenhang erklärt 87% der Varianz zwischen den Personen.</li>
</ul>
</div>
<div id="within-between-modell-mit-random-slope-und-cross-level-interaktion" class="section level3 unnumbered">
<h3><em>within-between</em> Modell mit <em>random slope</em> und <em>cross-level</em> Interaktion</h3>
<ul>
<li>Im <em>within-between</em> Modell können wir den Koeffizienten des <em>within</em>-Prädiktors zwischen den Personen variieren lassen. Dadurch lassen wir Heterogenität um den durchschnittlichen Treatment-Effekt zu. In der Formel ergänzen wir <code>(verhint_w | IDsosci)</code>
<ul>
<li><span class="citation">Bell, Fairbrother, and Jones (<a href="#ref-bellFixedRandomEffects2019" role="doc-biblioref">2019</a>)</span> empfehlen, im Idealfall die Koeffizienten aller, zumindest aber die der wichtigsten <em>within</em>-Prädiktoren zwischen den Personen variieren zu lassen.</li>
</ul></li>
<li>In der Folge können wir testen, auf welche Personenmerkmale sich die unspezifische Heterogenität zurückführen lässt. Hier prüfen wir, ob der kausale Effekt sich nach dem Geschlecht unterscheidet: <code>verhint1_w * C_sex</code>.</li>
</ul>
<div class="sourceCode" id="cb139"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb139-1"><a href="hybride-within-between-modelle.html#cb139-1"></a><span class="co"># Random slope für within-Effekt</span></span>
<span id="cb139-2"><a href="hybride-within-between-modelle.html#cb139-2"></a>wb_rs =<span class="st"> </span><span class="kw">lmer</span>(verh1 <span class="op">~</span><span class="st"> </span>verhint1_w <span class="op">+</span><span class="st"> </span>verhint1_b <span class="op">+</span><span class="st"> </span><span class="kw">factor</span>(wave) <span class="op">+</span><span class="st"> </span>(verhint1_w <span class="op">|</span><span class="st"> </span>IDsosci), </span>
<span id="cb139-3"><a href="hybride-within-between-modelle.html#cb139-3"></a>    <span class="dt">data =</span> d)</span>
<span id="cb139-4"><a href="hybride-within-between-modelle.html#cb139-4"></a>wb_rs <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">summary</span>(<span class="dt">correlation =</span> <span class="ot">FALSE</span>)</span></code></pre></div>
<pre><code>## Linear mixed model fit by REML. t-tests use Satterthwaite&#39;s method [
## lmerModLmerTest]
## Formula: verh1 ~ verhint1_w + verhint1_b + factor(wave) + (verhint1_w |  
##     IDsosci)
##    Data: d
## 
## REML criterion at convergence: 4057
## 
## Scaled residuals: 
##    Min     1Q Median     3Q    Max 
## -6.003 -0.334 -0.068  0.130  7.005 
## 
## Random effects:
##  Groups   Name        Variance Std.Dev. Corr
##  IDsosci  (Intercept) 0.0942   0.307        
##           verhint1_w  0.0968   0.311    0.63
##  Residual             0.2429   0.493        
## Number of obs: 2304, groups:  IDsosci, 576
## 
## Fixed effects:
##                 Estimate Std. Error         df t value     Pr(&gt;|t|)    
## (Intercept)      0.21851    0.03766 1037.67349    5.80 0.0000000087 ***
## verhint1_w       0.40642    0.02469  295.92758   16.46      &lt; 2e-16 ***
## verhint1_b       0.69774    0.01556  605.59516   44.85      &lt; 2e-16 ***
## factor(wave)2    0.00409    0.03043 1616.73231    0.13      0.89316    
## factor(wave)3    0.10461    0.03056 1620.45144    3.42      0.00063 ***
## factor(wave)4    0.09744    0.03159 1654.47637    3.09      0.00207 ** 
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1</code></pre>
<div class="sourceCode" id="cb141"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb141-1"><a href="hybride-within-between-modelle.html#cb141-1"></a><span class="co"># Modellvergleich</span></span>
<span id="cb141-2"><a href="hybride-within-between-modelle.html#cb141-2"></a><span class="kw">anova</span>(wb_ri, wb_rs)</span></code></pre></div>
<pre><code>## Data: d
## Models:
## wb_ri: verh1 ~ verhint1_w + verhint1_b + factor(wave) + (1 | IDsosci)
## wb_rs: verh1 ~ verhint1_w + verhint1_b + factor(wave) + (verhint1_w | 
## wb_rs:     IDsosci)
##       Df  AIC  BIC logLik deviance Chisq Chi Df Pr(&gt;Chisq)    
## wb_ri  8 4284 4330  -2134     4268                            
## wb_rs 10 4042 4100  -2011     4022   246      2     &lt;2e-16 ***
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1</code></pre>
<div class="sourceCode" id="cb143"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb143-1"><a href="hybride-within-between-modelle.html#cb143-1"></a><span class="co"># Interaktion des within-Prädiktors mit Geschlecht</span></span>
<span id="cb143-2"><a href="hybride-within-between-modelle.html#cb143-2"></a>wb_rs_ia =<span class="st"> </span><span class="kw">lmer</span>(verh1 <span class="op">~</span><span class="st"> </span>verhint1_w <span class="op">*</span><span class="st"> </span>C_sex <span class="op">+</span><span class="st"> </span>verhint1_b <span class="op">+</span><span class="st"> </span><span class="kw">factor</span>(wave) <span class="op">+</span><span class="st"> </span>(verhint1_w <span class="op">|</span><span class="st"> </span></span>
<span id="cb143-3"><a href="hybride-within-between-modelle.html#cb143-3"></a><span class="st">    </span>IDsosci), <span class="dt">data =</span> d)</span>
<span id="cb143-4"><a href="hybride-within-between-modelle.html#cb143-4"></a>wb_rs_ia <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">summary</span>(<span class="dt">correlation =</span> <span class="ot">FALSE</span>)</span></code></pre></div>
<pre><code>## Linear mixed model fit by REML. t-tests use Satterthwaite&#39;s method [
## lmerModLmerTest]
## Formula: 
## verh1 ~ verhint1_w * C_sex + verhint1_b + factor(wave) + (verhint1_w |  
##     IDsosci)
##    Data: d
## 
## REML criterion at convergence: 4062
## 
## Scaled residuals: 
##    Min     1Q Median     3Q    Max 
## -5.975 -0.338 -0.049  0.149  7.028 
## 
## Random effects:
##  Groups   Name        Variance Std.Dev. Corr
##  IDsosci  (Intercept) 0.0935   0.306        
##           verhint1_w  0.0973   0.312    0.63
##  Residual             0.2428   0.493        
## Number of obs: 2304, groups:  IDsosci, 576
## 
## Fixed effects:
##                    Estimate Std. Error         df t value     Pr(&gt;|t|)    
## (Intercept)         0.26512    0.04446  876.66346    5.96 0.0000000036 ***
## verhint1_w          0.43310    0.03847  280.85689   11.26      &lt; 2e-16 ***
## C_sex              -0.06732    0.03377  571.52249   -1.99      0.04664 *  
## verhint1_b          0.69476    0.01563  604.19894   44.44      &lt; 2e-16 ***
## factor(wave)2       0.00402    0.03043 1616.08075    0.13      0.89483    
## factor(wave)3       0.10435    0.03056 1619.50527    3.41      0.00065 ***
## factor(wave)4       0.09741    0.03158 1653.82795    3.08      0.00207 ** 
## verhint1_w:C_sex   -0.04512    0.04882  272.73255   -0.92      0.35619    
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1</code></pre>
<div class="sourceCode" id="cb145"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb145-1"><a href="hybride-within-between-modelle.html#cb145-1"></a><span class="co"># Modellvergleich</span></span>
<span id="cb145-2"><a href="hybride-within-between-modelle.html#cb145-2"></a><span class="kw">anova</span>(wb_ri, wb_rs, wb_rs_ia)</span></code></pre></div>
<pre><code>## Data: d
## Models:
## wb_ri: verh1 ~ verhint1_w + verhint1_b + factor(wave) + (1 | IDsosci)
## wb_rs: verh1 ~ verhint1_w + verhint1_b + factor(wave) + (verhint1_w | 
## wb_rs:     IDsosci)
## wb_rs_ia: verh1 ~ verhint1_w * C_sex + verhint1_b + factor(wave) + (verhint1_w | 
## wb_rs_ia:     IDsosci)
##          Df  AIC  BIC logLik deviance  Chisq Chi Df Pr(&gt;Chisq)    
## wb_ri     8 4284 4330  -2134     4268                             
## wb_rs    10 4042 4100  -2011     4022 245.62      2     &lt;2e-16 ***
## wb_rs_ia 12 4042 4111  -2009     4018   4.15      2       0.13    
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1</code></pre>
<div class="sourceCode" id="cb147"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb147-1"><a href="hybride-within-between-modelle.html#cb147-1"></a><span class="co"># Reduktion der Varianz in random slope durch Interaktion</span></span>
<span id="cb147-2"><a href="hybride-within-between-modelle.html#cb147-2"></a><span class="dv">1</span> <span class="op">-</span><span class="st"> </span>(<span class="kw">as.numeric</span>(<span class="kw">VarCorr</span>(wb_rs_ia)<span class="op">$</span>IDsosci[<span class="st">&quot;verhint1_w&quot;</span>, <span class="st">&quot;verhint1_w&quot;</span>]<span class="op">/</span><span class="kw">as.numeric</span>(<span class="kw">VarCorr</span>(wb_rs)<span class="op">$</span>IDsosci[<span class="st">&quot;verhint1_w&quot;</span>, </span>
<span id="cb147-3"><a href="hybride-within-between-modelle.html#cb147-3"></a>    <span class="st">&quot;verhint1_w&quot;</span>])))</span></code></pre></div>
<pre><code>## [1] -0.0049</code></pre>
<ul>
<li>Es gibt substantiell bedeutsame, statistisch signifikante Heterogenität um den durchschnittlichen Effekt der Intention auf das Verhalten.
<ul>
<li>Der durchschnittliche kausale <em>within</em>-Effekt und der Unterschied zwischen den Personen bleiben substantiell unverändert.</li>
<li>Die typischen Effekte (<em>fixed effect</em> von <code>verhint1_w</code> <span class="math inline">\(\pm 1 SD\)</span>) schwanken zwischen kleinen und deutlichen Effekten.</li>
<li>Die Aufnahme des <em>random slope</em> verbessert das Modell nach allen Kriterien deutlich.</li>
</ul></li>
<li>Der kausale Effekt ist nicht wesentlich vom Geschlecht abhängig. Er fällt für Frauen unwesentlich und nicht statistisch signifikant schwächer aus als für Männer.
<ul>
<li>Die Standardabweichung des <em>random slope</em> aus dem Modell ohne Interaktion hilft, die Effektstärke der Interaktion einzuordnen. Die mittlere Abweichung vom durchschnittlichen Effekt beträgt 0.3 Punkte. Die Effekte für Frauen und Männer unterscheiden sich um 0.04 Punkte. Gemessen an der Gesamt-Heterogenität ist die Heterogenität zwischen den Geschlechtern zu vernachlässigen. Dies zeigt sich auch an der (nicht existenten) Reduktion der Varianz im <em>random slope</em>.</li>
</ul></li>
</ul>
</div>
<div id="spezialfall-interaktion-von-within--und-between-prädiktor" class="section level3 unnumbered">
<h3>Spezialfall: Interaktion von <em>within</em>- und <em>between</em>-Prädiktor</h3>
<ul>
<li>Eine Interaktion des <em>within</em>- mit dem <em>between</em>-Prädiktor erlaubt es zu untersuchen, ob sich der kausale Effekt eines Prädiktors in Abhängigkeit der durchschnittlichen Ausprägung unterscheidet. Im vorliegenden Beispiel können wir testen, ob sich die Verhaltensintention stärker bei den Personen zu einer Handlung führt, die allgemein eher vorhaben, diese Handlung auszuüben.</li>
<li>Um die Koeffizienten in einem Modell mit einem Interaktionsterm aus zwei kontinuierlichen Variablen besser interpretierbar zu machen, zentrieren wir den <em>between</em>-Prädiktor um seinen Mittelwert. Der Mittelwert des <em>within</em>-Prädiktors ist durch die <em>within</em>-Transformation bereits gleich 0.</li>
</ul>
<div class="sourceCode" id="cb149"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb149-1"><a href="hybride-within-between-modelle.html#cb149-1"></a><span class="co"># Zentrieren des between-Prädiktors</span></span>
<span id="cb149-2"><a href="hybride-within-between-modelle.html#cb149-2"></a>d =<span class="st"> </span>d <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">mutate</span>(<span class="dt">verhint1_bc =</span> verhint1_b <span class="op">-</span><span class="st"> </span><span class="kw">mean</span>(verhint1_b))</span>
<span id="cb149-3"><a href="hybride-within-between-modelle.html#cb149-3"></a></span>
<span id="cb149-4"><a href="hybride-within-between-modelle.html#cb149-4"></a><span class="co"># Interaktion von within- und between Prädiktor</span></span>
<span id="cb149-5"><a href="hybride-within-between-modelle.html#cb149-5"></a>wb_rs_iawb =<span class="st"> </span><span class="kw">lmer</span>(verh1 <span class="op">~</span><span class="st"> </span>verhint1_w <span class="op">*</span><span class="st"> </span>verhint1_bc <span class="op">+</span><span class="st"> </span><span class="kw">factor</span>(wave) <span class="op">+</span><span class="st"> </span>(verhint1_w <span class="op">|</span><span class="st"> </span></span>
<span id="cb149-6"><a href="hybride-within-between-modelle.html#cb149-6"></a><span class="st">    </span>IDsosci), <span class="dt">data =</span> d)</span>
<span id="cb149-7"><a href="hybride-within-between-modelle.html#cb149-7"></a>wb_rs_iawb <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">summary</span>(<span class="dt">correlation =</span> <span class="ot">FALSE</span>)</span></code></pre></div>
<pre><code>## Linear mixed model fit by REML. t-tests use Satterthwaite&#39;s method [
## lmerModLmerTest]
## Formula: verh1 ~ verhint1_w * verhint1_bc + factor(wave) + (verhint1_w |  
##     IDsosci)
##    Data: d
## 
## REML criterion at convergence: 4037
## 
## Scaled residuals: 
##    Min     1Q Median     3Q    Max 
## -6.056 -0.374 -0.062  0.144  7.028 
## 
## Random effects:
##  Groups   Name        Variance Std.Dev. Corr
##  IDsosci  (Intercept) 0.0940   0.307        
##           verhint1_w  0.0864   0.294    0.66
##  Residual             0.2423   0.492        
## Number of obs: 2304, groups:  IDsosci, 576
## 
## Fixed effects:
##                          Estimate Std. Error         df t value   Pr(&gt;|t|)    
## (Intercept)               1.47593    0.02509 1933.84933   58.82    &lt; 2e-16 ***
## verhint1_w                0.32919    0.02825  400.16941   11.65    &lt; 2e-16 ***
## verhint1_bc               0.71534    0.01594  574.00586   44.86    &lt; 2e-16 ***
## factor(wave)2             0.00342    0.03033 1626.70386    0.11    0.91014    
## factor(wave)3             0.10593    0.03045 1631.33777    3.48    0.00052 ***
## factor(wave)4             0.10152    0.03146 1664.84967    3.23    0.00128 ** 
## verhint1_w:verhint1_bc    0.13744    0.02701  345.59075    5.09 0.00000059 ***
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1</code></pre>
<div class="sourceCode" id="cb151"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb151-1"><a href="hybride-within-between-modelle.html#cb151-1"></a><span class="co"># Reduktion der Varianz in random slope durch Interaktion</span></span>
<span id="cb151-2"><a href="hybride-within-between-modelle.html#cb151-2"></a><span class="dv">1</span> <span class="op">-</span><span class="st"> </span>(<span class="kw">as.numeric</span>(<span class="kw">VarCorr</span>(wb_rs_iawb)<span class="op">$</span>IDsosci[<span class="st">&quot;verhint1_w&quot;</span>, <span class="st">&quot;verhint1_w&quot;</span>]<span class="op">/</span><span class="kw">as.numeric</span>(<span class="kw">VarCorr</span>(wb_rs)<span class="op">$</span>IDsosci[<span class="st">&quot;verhint1_w&quot;</span>, </span>
<span id="cb151-3"><a href="hybride-within-between-modelle.html#cb151-3"></a>    <span class="st">&quot;verhint1_w&quot;</span>])))</span></code></pre></div>
<pre><code>## [1] 0.11</code></pre>
<div class="sourceCode" id="cb153"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb153-1"><a href="hybride-within-between-modelle.html#cb153-1"></a><span class="co"># Plot des kausalen Effekts als Funktion des between-Prädiktors</span></span>
<span id="cb153-2"><a href="hybride-within-between-modelle.html#cb153-2"></a><span class="kw">tibble</span>(<span class="dt">b1 =</span> <span class="kw">fixef</span>(wb_rs_iawb)[<span class="st">&quot;verhint1_w&quot;</span>], <span class="dt">b3 =</span> <span class="kw">fixef</span>(wb_rs_iawb)[<span class="st">&quot;verhint1_w:verhint1_bc&quot;</span>], </span>
<span id="cb153-3"><a href="hybride-within-between-modelle.html#cb153-3"></a>    <span class="dt">Z =</span> <span class="kw">quantile</span>(<span class="kw">model.frame</span>(wb_rs_iawb)[, <span class="st">&quot;verhint1_bc&quot;</span>], <span class="dt">probs =</span> (<span class="dv">0</span><span class="op">:</span><span class="dv">10</span>)<span class="op">/</span><span class="dv">10</span>), <span class="dt">theta =</span> b1 <span class="op">+</span><span class="st"> </span></span>
<span id="cb153-4"><a href="hybride-within-between-modelle.html#cb153-4"></a><span class="st">        </span>Z <span class="op">*</span><span class="st"> </span>b3, <span class="dt">se_b1 =</span> <span class="kw">coef</span>(<span class="kw">summary</span>(wb_rs_iawb))[<span class="st">&quot;verhint1_w&quot;</span>, <span class="dv">2</span>], <span class="dt">COV_b1b3 =</span> <span class="kw">vcov</span>(wb_rs_iawb)[<span class="st">&quot;verhint1_w&quot;</span>, </span>
<span id="cb153-5"><a href="hybride-within-between-modelle.html#cb153-5"></a>        <span class="st">&quot;verhint1_w:verhint1_bc&quot;</span>], <span class="dt">se_b3 =</span> <span class="kw">coef</span>(<span class="kw">summary</span>(wb_rs_iawb))[<span class="st">&quot;verhint1_w:verhint1_bc&quot;</span>, </span>
<span id="cb153-6"><a href="hybride-within-between-modelle.html#cb153-6"></a>        <span class="dv">2</span>], <span class="dt">se_theta =</span> <span class="kw">sqrt</span>(se_b1<span class="op">^</span><span class="dv">2</span> <span class="op">+</span><span class="st"> </span><span class="dv">2</span> <span class="op">*</span><span class="st"> </span>Z <span class="op">*</span><span class="st"> </span>COV_b1b3 <span class="op">+</span><span class="st"> </span>Z<span class="op">^</span><span class="dv">2</span> <span class="op">*</span><span class="st"> </span>se_b3<span class="op">^</span><span class="dv">2</span>), <span class="dt">ci.lo_theta =</span> theta <span class="op">+</span><span class="st"> </span></span>
<span id="cb153-7"><a href="hybride-within-between-modelle.html#cb153-7"></a><span class="st">        </span><span class="kw">qt</span>(<span class="fl">0.05</span><span class="op">/</span><span class="dv">2</span>, <span class="kw">df.residual</span>(wb_rs_iawb)) <span class="op">*</span><span class="st"> </span>se_theta, <span class="dt">ci.hi_theta =</span> theta <span class="op">+</span><span class="st"> </span><span class="kw">qt</span>(<span class="dv">1</span> <span class="op">-</span><span class="st"> </span></span>
<span id="cb153-8"><a href="hybride-within-between-modelle.html#cb153-8"></a><span class="st">        </span><span class="fl">0.05</span><span class="op">/</span><span class="dv">2</span>, <span class="kw">df.residual</span>(wb_rs_iawb)) <span class="op">*</span><span class="st"> </span>se_theta) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(Z, theta, <span class="dt">ymin =</span> ci.lo_theta, </span>
<span id="cb153-9"><a href="hybride-within-between-modelle.html#cb153-9"></a>    <span class="dt">ymax =</span> ci.hi_theta)) <span class="op">+</span><span class="st"> </span><span class="kw">geom_ribbon</span>(<span class="dt">alpha =</span> <span class="fl">0.2</span>) <span class="op">+</span><span class="st"> </span><span class="kw">geom_line</span>() <span class="op">+</span><span class="st"> </span><span class="kw">geom_rug</span>(<span class="dt">data =</span> <span class="kw">filter</span>(d, </span>
<span id="cb153-10"><a href="hybride-within-between-modelle.html#cb153-10"></a>    wave <span class="op">==</span><span class="st"> </span><span class="dv">1</span>), <span class="kw">aes</span>(verhint1_bc, <span class="dv">0</span>), <span class="dt">sides =</span> <span class="st">&quot;b&quot;</span>, <span class="dt">inherit.aes =</span> F, <span class="dt">position =</span> <span class="kw">position_jitter</span>(<span class="dt">width =</span> <span class="fl">0.1</span>, </span>
<span id="cb153-11"><a href="hybride-within-between-modelle.html#cb153-11"></a>    <span class="dt">height =</span> <span class="dv">0</span>), <span class="dt">alpha =</span> <span class="fl">0.2</span>, <span class="dt">length =</span> <span class="kw">unit</span>(<span class="dv">1</span>, <span class="st">&quot;cm&quot;</span>)) <span class="op">+</span><span class="st"> </span><span class="kw">labs</span>(<span class="dt">x =</span> <span class="st">&quot;Verhaltensintention Between (zentriert)&quot;</span>, </span>
<span id="cb153-12"><a href="hybride-within-between-modelle.html#cb153-12"></a>    <span class="dt">y =</span> <span class="st">&quot; Within-Effekt der Verhaltensintention&quot;</span>)</span></code></pre></div>
<p><img src="workshop_panel_files/figure-html/wb3-1.png" width="672" /></p>
<ul>
<li><code>verhint1_w</code>: Der kausale <em>within</em>-Effekt für Personen, <em>deren mittlere Verhaltensintention dem Stichprobenmittelwert entspricht</em>, beträgt 0.3 Punkte.</li>
<li><code>verhint1_b</code>: Zwei Personen, deren mittlere Verhaltensintention sich um einen Punkt unterscheidet, unterscheiden sich <em>dann, wenn ihre aktuelle Verhaltensintention ihrer mittleren Verhaltensintention entspricht</em>, um 0.7 Punkte.</li>
<li><code>verhint1_w:verhint1_bc</code>: Der kausale Effekt unterscheidet sich zwischen zwei Personen, deren mittlere Verhaltensintention sich um einen Punkt unterscheidet, um 0.1 Punkte. Die Interaktion verringert die Varianz im <em>random slope</em> um 11%.
<ul>
<li>Wie sich der kausale Effekt in Abhängigkeit der mittleren Verhaltensintention verändert, ist in der Abbildung dargestellt. Die “Barcodes” am unteren Rand zeigen die Verteilung des <em>between</em>-Prädiktors in der Stichprobe. Die graue Fläche um die Linie ist ein 95%-Konfidenzintervall.</li>
<li>Bei Personen, die über die Wellen hinweg eine größere Intention zeigen (= auf <em>between</em>-Prädiktor höhere Werte haben), führt eine Steigerung der Intention zu einer deutlicheren Steigerung der Handlungshäufigkeit. Bei Personen, die insgesamt nur eine geringe Intention haben, nach draußen zu gehen (die deutliche Mehrheit in der Stichprobe), ist der kausale Effekt schwächer ausgeprägt.</li>
</ul></li>
</ul>
</div>
<div id="zusammenfassung" class="section level3 unnumbered">
<h3>Zusammenfassung</h3>
<blockquote>
<p>We hope the discussion above has convinced readers of the superiority of the REWB model, except perhaps when the within and between effects are approximately equal, in which case the standard RE model (without separated within and between effects) might be preferable for reasons of efficiency. Even then, the REWB model should be considered first, or as an alternative, since the equality of the within and between coefficients should not be assumed. As for FE, except for simplicity there is nothing that such models offer that a REWB model does not. — <span class="citation">Bell, Fairbrother, and Jones (<a href="#ref-bellFixedRandomEffects2019" role="doc-biblioref">2019</a>)</span></p>
</blockquote>
</div>
</div>
<div id="übungsaufgaben-6" class="section level2">
<h2><span class="header-section-number">5.3</span> Übungsaufgaben 6</h2>
<ol style="list-style-type: decimal">
<li>Schätze den kausalen Effekt der Einstellung <code>ein3</code> und der wahrgenommenen deskriptiven Norm <code>desnormp3</code> mit Bezug zum Einhalten des Abstands von 1.5m zu anderen Personen auf die Intention, diese Verhaltensregel zu befolgen. Untersuche auch den Zusammenhang zwischen den über die Zeit stabilen Anteilen der Prädiktoren und dem Kriterium.
<ul>
<li>Transformiere zuerst die Prädiktoren in jeweils einen <em>within</em>- und einen <em>between</em>-Prädiktor.</li>
<li>Schätze ein geeignetes Null-Modell mit <em>random intercept</em> als Referenz.</li>
<li>Schätze das hybride <em>within-between</em> Panelmodell mit <em>random intercept</em>.</li>
<li>Nimm zusätzlich das eine Dummy-Variable für Ab-50-Jährige als Prädiktor auf.</li>
<li>Prüfe, ob sich die kausale Effekte zwischen ab und unter 50-Jährigen unterscheiden.</li>
<li>Schätze das hybride <em>within-between</em> Panelmodell mit <em>random slope</em> für die kausalen Effekte.</li>
<li>Prüfe auch anhand dieser Modelle, ob sich die kausale Effekte zwischen ab und unter 50-Jährigen unterscheiden.</li>
<li>Prüfe, ob sich die kausalen Effekte der Einstellung und der wahrgenommenen deskriptiven Norm nach dem mittleren Personen-Niveau des jeweiligen Prädiktors unterscheiden.</li>
</ul></li>
<li>Spezifiziere, schätze und interpretiere ein eigenes hybrides <em>within-between</em> Panelmodell mit Daten aus dem Beispieldatensatz.</li>
</ol>

</div>
</div>
<h3>Literatur</h3>
<div id="refs" class="references">
<div id="ref-bellFixedRandomEffects2019">
<p>Bell, Andrew, Malcolm Fairbrother, and Kelvyn Jones. 2019. “Fixed and Random Effects Models: Making an Informed Choice.” <em>Quality &amp; Quantity</em> 53 (2): 1051–74. <a href="https://doi.org/10.1007/s11135-018-0802-x">https://doi.org/10.1007/s11135-018-0802-x</a>.</p>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="random-effects-modelle.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="literatur.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["workshop_panel.pdf"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
